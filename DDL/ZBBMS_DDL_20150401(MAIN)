--zbbms@20150401 drop table - START
DROP TABLE T_TRANSACTION;
DROP TABLE T_MT_EMPLOYEE;
DROP TABLE T_MT_ROLE;
DROP TABLE T_MT_BOOK;
DROP TABLE T_MT_CUSTOMER;
DROP TABLE T_MT_DISCOUNT;
--zbbms@20150401 drop table - END

--zbbms@20150401 create book table - START
CREATE TABLE T_MT_BOOK (
ID VARCHAR2(32),
TITLE VARCHAR2(50),
DESCRIPTION VARCHAR2(80),
AUTHOR VARCHAR2(50),
PUBLISHER VARCHAR2(50),
PRICE NUMBER(5,2),
STOCK NUMBER,
CD VARCHAR2(4),
CONSTRAINT PK_BK_ID PRIMARY KEY(ID),
CONSTRAINT UK_BK_CD UNIQUE(CD)
);
--zbbms@20150401 create book table - END

--zbbms@20150401 create role table - START
CREATE TABLE T_MT_ROLE(
ID VARCHAR2(32),
ROLE VARCHAR2(30),
CD VARCHAR2(4),
CONSTRAINT PK_ROLE_ID PRIMARY KEY (ID),
CONSTRAINT UK_ROLE_CD UNIQUE(CD)
);
--zbbms@20150401 create role table - END

--zbbms@20150401 create employee table - START
CREATE TABLE T_MT_EMPLOYEE(
ID VARCHAR2(32),
NAME VARCHAR2(50),
DOB DATE,
ADDRESS VARCHAR2(80),
PHONE VARCHAR2(20),
EMAIL VARCHAR2(30),
SALARY NUMBER(7,2),
WORKING_HOURS NUMBER,
USERNAME VARCHAR2(20),
EPASSWORD VARCHAR2(20),
ROLE_ID VARCHAR2(32),
CD VARCHAR2(4),
CONSTRAINT PK_EMP_ID PRIMARY KEY(ID),
CONSTRAINT FK_ROLE_ID FOREIGN KEY(ROLE_ID) REFERENCES T_MT_ROLE(ID),
CONSTRAINT UK_EMP_CD UNIQUE(CD)
);
--zbbms@20150401 create employee table - END

--zbbms@20150401 create customer table - START
CREATE TABLE T_MT_CUSTOMER(
ID VARCHAR2(32),
NAME VARCHAR2(50),
DOB DATE,
ADDRESS VARCHAR2(80),
PHONE VARCHAR2(20),
EMAIL VARCHAR2(30),
MEMBERSHIP_PERIOD NUMBER,
JOIN_DATE DATE,
USERNAME VARCHAR2(20),
CPASSWORD VARCHAR2(20),
CD VARCHAR2(4),
CONSTRAINT PK_CUST_ID PRIMARY KEY(ID),
CONSTRAINT UK_CUST_CD UNIQUE(CD)
);
--zbbms@20150401 create customer table - END

--zbbms@20150401 create discount table - START
CREATE TABLE T_MT_DISCOUNT(
ID VARCHAR2(32),
TITLE VARCHAR2(50),
DISCTYPE VARCHAR2(20),
AMOUNT NUMBER,
DESCRIPTION VARCHAR2(50),
CD VARCHAR2(4),
CONSTRAINT PK_DISC_ID PRIMARY KEY(ID),
CONSTRAINT UK_DISC_CD UNIQUE(CD)
);
--zbbms@20150401 create discount table - END

--zbbms@20150401 create bktransaction table - START
CREATE TABLE T_TRANSACTION (
ID VARCHAR2(32),
CUSTOMER_ID VARCHAR2(32),
EMPLOYEE_ID VARCHAR2(32),
BOOK_ID VARCHAR2(32),
DISCOUNT_ID VARCHAR2(32),
DATE_COMMENCE DATE,
TOTAL_PAYMENT NUMBER(5,2),
CD VARCHAR2(4),
CONSTRAINT PK_BKTRAN_ID PRIMARY KEY(ID),
CONSTRAINT FK_BKTRAN_CUST FOREIGN KEY (CUSTOMER_ID) REFERENCES T_MT_CUSTOMER(ID),
CONSTRAINT FK_BKTRAN_EMP FOREIGN KEY (EMPLOYEE_ID) REFERENCES T_MT_EMPLOYEE(ID),
CONSTRAINT FK_BKTRAN_BOOK FOREIGN KEY (BOOK_ID) REFERENCES T_MT_BOOK(ID),
CONSTRAINT FK_BKTRAN_DISC FOREIGN KEY (DISCOUNT_ID) REFERENCES T_MT_DISCOUNT(ID),
CONSTRAINT UK_TRAN_CD UNIQUE(CD)
);
--zbbms@20150401 create bktransaction table - END
